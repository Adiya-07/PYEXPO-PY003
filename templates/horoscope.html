{% extends "base.html" %}

{% block content %}
<section>
    <div class="section-header">
        <h2 id="rasiTitle">{{ translations.rasiTitle }}</h2>
        <p>Based on authentic Vedic calculations from your birth details</p>
    </div>
    
    {% if user_chart %}
    <div id="rasiDisplay" style="display: grid;">
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <div class="dashboard-icon" id="rasiIcon">{{ rasi_symbols[user_chart.rasi.number] }}</div>
                <div class="dashboard-info">
                    <h4 id="rasiLabel">{{ translations.rasiLabel }}</h4>
                    <p id="rasiName">
                        {% if language == 'ta' %}
                            {{ user_chart.rasi.tamil_name }} ({{ user_chart.rasi.degrees }}┬░)
                        {% else %}
                            {{ user_chart.rasi.english_name }} ({{ user_chart.rasi.degrees }}┬░)
                        {% endif %}
                    </p>
                </div>
            </div>
            <div class="dashboard-card">
                <div class="dashboard-icon">тнР</div>
                <div class="dashboard-info">
                    <h4 id="nakshatraLabel">{{ translations.nakshatraLabel }}</h4>
                    <p id="nakshatraName">
                        {% if language == 'ta' %}
                            {{ user_chart.nakshatra.tamil_name }} - рокро╛родроорпН {{ user_chart.nakshatra.pada }}
                        {% else %}
                            {{ user_chart.nakshatra.name }} - Pada {{ user_chart.nakshatra.pada }}
                        {% endif %}
                    </p>
                </div>
            </div>
            <div class="dashboard-card">
                <div class="dashboard-icon">ЁЯМЕ</div>
                <div class="dashboard-info">
                    <h4 id="lagnaLabel">{{ translations.lagnaLabel }}</h4>
                    <p id="lagnaName">{{ user_chart.lagna.name }}</p>
                </div>
            </div>
            <div class="dashboard-card">
                <div class="dashboard-icon">ЁЯУР</div>
                <div class="dashboard-info">
                    <h4 id="ayanamsaLabel">{{ translations.ayanamsaLabel }}</h4>
                    <p id="ayanamsaValue">{{ user_chart.ayanamsa }}┬░</p>
                </div>
            </div>
        </div>
        <div class="calculation-info" id="calculationInfo">
            {% if language == 'ta' %}
                <strong>роХрогроХрпНроХрпАроЯрпБ ро╡ро┐ро╡ро░роЩрпНроХро│рпН:</strong><br>
                роЪроирпНродро┐ро░ роиро┐ро▓рпИ: {{ user_chart.moon_longitude }}┬░ | роЪрпВро░ро┐роп роиро┐ро▓рпИ: {{ user_chart.sun_longitude }}┬░<br>
                роироЯрпНроЪродрпНродро┐ро░ роЕродро┐рокродро┐: {{ user_chart.nakshatra.lord }} | роХрпБрогроорпН: {{ user_chart.nakshatra.gana }} | роиро╛роЯро┐: {{ user_chart.nakshatra.nadi }}
            {% else %}
                <strong>Calculation Details:</strong><br>
                Moon: {{ user_chart.moon_longitude }}┬░ | Sun: {{ user_chart.sun_longitude }}┬░<br>
                Nakshatra Lord: {{ user_chart.nakshatra.lord }} | Gana: {{ user_chart.nakshatra.gana }} | Nadi: {{ user_chart.nakshatra.nadi }}
            {% endif %}
        </div>
    </div>
    
    {% if horoscope_data %}
    <div class="horoscope-display" id="horoscopeDisplay">
        <div class="horoscope-header">
            <span class="horoscope-icon" id="horoIcon">{{ rasi_symbols[user_chart.rasi.number] }}</span>
            <div>
                <div class="horoscope-title" id="horoTitle">
                    {% if language == 'ta' %}
                        {{ user_chart.rasi.tamil_name }}
                    {% else %}
                        {{ user_chart.rasi.english_name }}
                    {% endif %}
                </div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;" id="horoSubtitle">
                    {% if language == 'ta' %}
                        роЕродро┐рокродро┐: {{ horoscope_data.ruler }} | родродрпНродрпБро╡роорпН: {{ horoscope_data.element }} | роироЯрпНроЪродрпНродро┐ро░роорпН: {{ user_chart.nakshatra.tamil_name }}
                    {% else %}
                        Ruler: {{ horoscope_data.ruler }} | Element: {{ horoscope_data.element }} | Nakshatra: {{ user_chart.nakshatra.name }}
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="horoscope-content" id="horoContent">
            {% set lang_data = horoscope_data[language] %}
            <p><strong>{{ 'рокрпКродрпБ:' if language == 'ta' else 'General:' }}</strong> {{ lang_data.general }}</p>
            <p style="margin-top: 1rem;"><strong>{{ 'родрпКро┤ро┐ро▓рпН:' if language == 'ta' else 'Career:' }}</strong> {{ lang_data.career }}</p>
            <p style="margin-top: 1rem;"><strong>{{ 'роХро╛родро▓рпН:' if language == 'ta' else 'Love:' }}</strong> {{ lang_data.love }}</p>
            <p style="margin-top: 1rem;"><strong>{{ 'роЖро░рпЛроХрпНроХро┐ропроорпН:' if language == 'ta' else 'Health:' }}</strong> {{ lang_data.health }}</p>
            <p style="margin-top: 1rem;"><strong>{{ 'роиро┐родро┐:' if language == 'ta' else 'Finance:' }}</strong> {{ lang_data.finance }}</p>
        </div>
        <div class="horoscope-tags" id="horoTags">
            <span class="tag">{{ 'роЕродро┐ро░рпНро╖рпНроЯ роиро┐ро▒роорпН: ' if language == 'ta' else 'Lucky Color: ' }}{{ lang_data.lucky.color }}</span>
            <span class="tag">{{ 'роЕродро┐ро░рпНро╖рпНроЯ роОрогрпН: ' if language == 'ta' else 'Lucky Number: ' }}{{ lang_data.lucky.number }}</span>
            <span class="tag">{{ 'роЕродро┐ро░рпНро╖рпНроЯ роиро╛ро│рпН: ' if language == 'ta' else 'Lucky Day: ' }}{{ lang_data.lucky.day }}</span>
        </div>
    </div>
    {% endif %}
    
    {% else %}
    <div class="glass-card" style="text-align: center; padding: 3rem;">
        <p style="color: var(--text-secondary); font-size: 1.1rem;">
            {{ 'роЙроЩрпНроХро│рпН ро░ро╛роЪро┐ропрпИроХрпН роХро╛рог, родропро╡рпБроЪрпЖропрпНродрпБ роорпБродро▓рпН рокроХрпНроХродрпНродро┐ро▓рпН роЙроЩрпНроХро│рпН рокро┐ро▒роирпНрод ро╡ро┐ро╡ро░роЩрпНроХро│рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН.' if language == 'ta' else 'Please enter your birth details on the home page to see your Rasi.' }}
        </p>
        <a href="/" class="btn-primary" style="margin-top: 1.5rem; display: inline-block; text-decoration: none;">
            {{ 'ро╡ро┐ро╡ро░роЩрпНроХро│рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН' if language == 'ta' else 'Enter Details' }}
        </a>
    </div>
    {% endif %}
</section>
{% endblock %}
