{% extends "base.html" %}
{% block content %}
<section style="padding:2rem 1rem;max-width:960px;margin:0 auto">
    <div style="text-align:center;margin-bottom:2rem">
        <h1 style="font-family:'Cinzel',serif;color:#FFD700;font-size:2rem">ЁЯкР {% if language=='ta' %}ро╡рпЗрод рокро┐ро▒рокрпНрокрпБ
            роЪроХрпНроХро░роорпН{% else %}Vedic Birth Chart{% endif %}</h1>
        <p style="color:rgba(255,255,255,.4);font-size:.8rem">
            {% if language=='ta' %}родрпЖройрпН роЗроирпНродро┐роп рокро╛рогро┐ тАв ро░ро╛роЪро┐ роиро┐ро▓рпИропро╛ройродрпБ тАв ро▓роХрпНройродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ ро╡рпАроЯрпБроХро│рпН роХрогроХрпНроХро┐роЯрокрпНрокроЯрпБроХро┐ройрпНро▒рой{%
            else %}South Indian Style тАв Signs fixed тАв Houses counted clockwise from Lagna{% endif %}
        </p>
    </div>

    {% if user_chart %}
    <div style="display:grid;grid-template-columns:420px 1fr;gap:2rem;align-items:start">

        <!-- SVG Chart -->
        <div>
            <div style="display:flex;justify-content:center">
                {{ svg_chart|safe }}
            </div>
            <!-- House info panel (shown on click) -->
            <div id="housePanel" style="display:none;margin-top:1rem;background:rgba(255,255,255,.05);
         border:1px solid rgba(255,215,0,.25);border-radius:14px;padding:1.2rem">
                <div style="font-family:'Cinzel',serif;color:#FFD700;font-weight:600;margin-bottom:.5rem"
                    id="housePanelTitle"></div>
                <div style="color:rgba(255,255,255,.7);font-size:.88rem;line-height:1.6" id="housePanelBody"></div>
            </div>
            <p style="text-align:center;color:rgba(255,255,255,.3);font-size:.75rem;margin-top:.8rem">
                {% if language=='ta' %}ро╡рпАроЯрпНроЯро┐ро▓рпН роХро┐ро│ро┐роХрпН роЪрпЖропрпНропрпБроЩрпНроХро│рпН{% else %}Click any house for details{% endif %}
            </p>
        </div>

        <!-- Sidebar -->
        <div style="display:flex;flex-direction:column;gap:1rem">

            <!-- Chart summary -->
            <div class="glass-card" style="padding:1.5rem">
                <h3 style="color:#FFD700;font-family:'Cinzel',serif;margin-bottom:1rem;font-size:1rem">
                    {% if language=='ta' %}роЬро╛родроХ роЪрпБро░рпБроХрпНроХроорпН{% else %}Chart Summary{% endif %}
                </h3>
                {% for label_en, label_ta, val in [
                ('ЁЯМЩ Rasi (Moon Sign)', 'ЁЯМЩ ро░ро╛роЪро┐', (user_chart.rasi.tamilName if language=="ta" else
                user_chart.rasi.englishName)),
                ('тнР Nakshatra', 'тнР роироЯрпНроЪродрпНродро┐ро░роорпН', (user_chart.nakshatra.tamilName if language=="ta" else
                user_chart.nakshatra.name) ~ ' Pada ' ~ user_chart.nakshatra.pada),
                ('ЁЯкР Nak. Lord', 'ЁЯкР роироЯрпНроЪродрпНродро┐ро░ роЕродро┐рокродро┐', user_chart.nakshatra.lord),
                ('ЁЯПа Lagna', 'ЁЯПа ро▓роХрпНройроорпН', (user_chart.lagna.tamilName if language=="ta" else
                user_chart.lagna.englishName)),
                ('ЁЯМА Gana', 'ЁЯМА роХрогроорпН', user_chart.nakshatra.gana),
                ('ЁЯТз Nadi', 'ЁЯТз роиро╛роЯро┐', user_chart.nakshatra.nadi),
                ('ЁЯФе Element', 'ЁЯФе рокрпВродроорпН', user_chart.rasi.element),
                ('ЁЯСС Rasi Lord', 'ЁЯСС ро░ро╛роЪро┐ропро╛родро┐рокродро┐', user_chart.rasi.lord)
                ] %}
                <div
                    style="display:flex;justify-content:space-between;padding:.45rem 0;border-bottom:1px solid rgba(255,255,255,.06)">
                    <span style="color:rgba(255,255,255,.45);font-size:.82rem">{% if language=='ta' %}{{ label_ta }}{%
                        else %}{{ label_en }}{% endif %}</span>
                    <span style="color:#FFD700;font-weight:600;font-size:.85rem">{{ val }}</span>
                </div>
                {% endfor %}
            </div>

            <!-- Planets in houses -->
            <div class="glass-card" style="padding:1.5rem">
                <h3 style="color:#FFD700;font-family:'Cinzel',serif;margin-bottom:1rem;font-size:1rem">
                    {% if language=='ta' %}роХро┐ро░роХ роиро┐ро▓рпИроХро│рпН{% else %}Planetary Positions{% endif %}
                </h3>
                {% for p in planets %}
                <div
                    style="display:flex;align-items:center;gap:.7rem;padding:.4rem 0;border-bottom:1px solid rgba(255,255,255,.05)">
                    <span style="color:{{ p.color }};font-weight:700;min-width:24px;font-size:.85rem">{{ p.symbol
                        }}</span>
                    <div style="flex:1">
                        <div style="color:rgba(255,255,255,.8);font-size:.82rem;font-weight:600">
                            {{ p.name }}
                            <span style="color:rgba(255,255,255,.35);font-weight:400;font-size:.75rem">тАФ House {{
                                p.house }}</span>
                        </div>
                        <div style="color:rgba(255,255,255,.4);font-size:.72rem">
                            {% if language=='ta' %}{{ p.sign_ta }}{% else %}{{ p.sign }}{% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Planet meanings -->
            <div class="glass-card" style="padding:1.5rem">
                <h3 style="color:#FFD700;font-family:'Cinzel',serif;margin-bottom:1rem;font-size:1rem">
                    {% if language=='ta' %}роХро┐ро░роХ роЕро░рпНродрпНродроЩрпНроХро│рпН{% else %}What Each Planet Rules{% endif %}
                </h3>
                {% for p in planets %}
                <div style="margin-bottom:.7rem;padding-bottom:.7rem;border-bottom:1px solid rgba(255,255,255,.04)">
                    <span style="color:{{ p.color }};font-weight:700;font-size:.8rem">{{ p.name }}</span>
                    <span
                        style="color:rgba(255,255,255,.45);font-size:.75rem;display:block;line-height:1.4;margin-top:.15rem">{{
                        p.info }}</span>
                </div>
                {% endfor %}
            </div>

        </div>
    </div>

    {% else %}
    <div
        style="text-align:center;padding:3rem;background:rgba(255,255,255,.04);border:1px dashed rgba(255,215,0,.3);border-radius:16px">
        <div style="font-size:3rem;margin-bottom:1rem">ЁЯкР</div>
        <p style="color:rgba(255,255,255,.6);margin-bottom:1.5rem">
            {% if language=='ta' %}роорпБродро▓ро┐ро▓рпН роЙроЩрпНроХро│рпН рокро┐ро▒роирпНрод ро╡ро┐ро╡ро░роЩрпНроХро│рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН{% else %}Enter your birth details first to
            generate your chart{% endif %}
        </p>
        <a href="/"
            style="display:inline-block;padding:.8rem 2rem;background:linear-gradient(135deg,#FFD700,#FF8C00);color:#000;border-radius:25px;font-weight:700;text-decoration:none">
            {% if language=='ta' %}роорпБроХрокрпНрокрпБ{% else %}Go to Home{% endif %}
        </a>
    </div>
    {% endif %}
</section>
{% endblock %}